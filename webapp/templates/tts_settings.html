{% extends "base.html" %}
{% block content %}
<div class="card">
  <h1 class="h1" data-i18n="tts.page_title">Ustawienia TTS (Lektor)</h1>

  <div class="grid">
    <div class="subcard">

      <style>
        .tts-model-row{ display:grid; grid-template-columns: minmax(360px, 520px) 1fr; gap:14px; align-items:start; }
        .tts-model-left{ min-width: 0; }
        .tts-model-right{ min-width: 0; }
        .tts-info-box{
          border: 1px solid rgba(255,255,255,0.10);
          background: rgba(0,0,0,0.08);
          border-radius: 10px;
          padding: 10px 12px;
        }
        .tts-info-title{ font-weight:600; margin-bottom:6px; }
        .tts-install-row{ display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap; }
        .tts-install-row .small{ margin:0; }
        .tts-kv{ display:grid; grid-template-columns: 140px 1fr; gap:4px 12px; }
        .tts-kv .kv-h{ font-weight:600; opacity:.95; }
        .tts-warn{
          border: 1px solid rgba(185, 28, 28, 0.22);
          background: rgba(185, 28, 28, 0.10);
          border-radius: 10px;
          padding: 8px 10px;
          margin-top: 10px;
          font-size: 12px;
          color: var(--text);
        }
        .tts-test-row{ display:flex; gap:8px; align-items:center; margin-top:10px; flex-wrap:wrap; }
        .tts-test-row input{ flex:1; min-width:180px; }
        @media (max-width: 980px){
          .tts-model-row{ grid-template-columns: 1fr; }
        }
      </style>

      <!-- Task progress (top) -->
      <div class="label" data-i18n="tts.task_title">ğŸ§¾ PostÄ™p zadania</div>
      <div class="small"><span data-i18n="common.status">Status</span>: <span id="tts_task_status">â€”</span></div>
      <div class="small"><span data-i18n="common.progress">PostÄ™p</span>: <span id="tts_task_pct">0%</span></div>
      <div class="progress" style="margin-top:10px"><div id="tts_task_bar"></div></div>

      <div class="row" style="margin-top:10px; flex-wrap:wrap">
        <a class="btn secondary" id="tts_task_open_logs" href="/logs" style="display:none" data-i18n="tts.open_logs">OtwÃ³rz logi</a>
      </div>

      <div class="hr"></div>

      <!-- ================ PIPER TTS ================ -->
      <div class="label">âš¡ Piper TTS</div>
      <div class="small muted" data-i18n="tts.piper.desc">Najszybszy silnik TTS. Zoptymalizowany pod CPU, ~50 jÄ™zykÃ³w. Modele 15-60 MB. Licencja MIT.</div>

      <div class="hr"></div>

      <div class="tts-model-row">
        <div class="tts-model-left">
          <div class="label">Piper â€” <span data-i18n="tts.engine_status">Status silnika</span></div>
          <div class="small" id="tts_piper_status">â€”</div>

          <select id="tts_piper_voice" class="input" data-engine="piper">
            <option value="pl_PL-gosia-medium">ğŸ‡µğŸ‡± Polski â€” Gosia (medium)</option>
            <option value="en_US-amy-medium">ğŸ‡¬ğŸ‡§ English â€” Amy (medium)</option>
            <option value="en_US-lessac-medium">ğŸ‡¬ğŸ‡§ English â€” Lessac (medium)</option>
            <option value="ru_RU-irina-medium">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹ â€” Irina (medium)</option>
            <option value="uk_UA-ukrainian_tts-medium">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° (medium)</option>
            <option value="de_DE-thorsten-medium">ğŸ‡©ğŸ‡ª Deutsch â€” Thorsten (medium)</option>
            <option value="fr_FR-siwis-medium">ğŸ‡«ğŸ‡· FranÃ§ais â€” Siwis (medium)</option>
            <option value="es_ES-sharvard-medium">ğŸ‡ªğŸ‡¸ EspaÃ±ol â€” Sharvard (medium)</option>
            <option value="it_IT-riccardo-x_low">ğŸ‡®ğŸ‡¹ Italiano â€” Riccardo</option>
            <option value="pt_BR-faber-medium">ğŸ‡§ğŸ‡· PortuguÃªs â€” Faber (medium)</option>
            <option value="zh_CN-huayan-medium">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ â€” Huayan (medium)</option>
            <option value="ja_JP-kokoro-medium">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª â€” Kokoro (medium)</option>
            <option value="ko_KR-korean-medium">ğŸ‡°ğŸ‡· í•œêµ­ì–´ (medium)</option>
            <option value="tr_TR-dfki-medium">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e â€” DFKI (medium)</option>
            <option value="nl_NL-mls-medium">ğŸ‡³ğŸ‡± Nederlands (medium)</option>
            <option value="cs_CZ-jirka-medium">ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina â€” Jirka (medium)</option>
            <option value="sv_SE-nst-medium">ğŸ‡¸ğŸ‡ª Svenska (medium)</option>
            <option value="ar_JO-kareem-medium">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© â€” Kareem (medium)</option>
          </select>

          <div class="tts-install-row">
            <button class="btn primary mini" type="button" id="tts_piper_install_btn" data-engine="piper">
              â¬‡ï¸ <span data-i18n="tts.btn.install">Instaluj silnik + gÅ‚os</span>
            </button>
            <span class="small muted" id="tts_piper_inline">â€”</span>
          </div>

          <div class="tts-test-row">
            <input type="text" id="tts_piper_test_text" class="input" placeholder="Tekst testowy..." value="Witaj, to jest test lektora.">
            <button class="btn secondary mini" type="button" id="tts_piper_test_btn" data-engine="piper">
              ğŸ”Š <span data-i18n="tts.btn.test">Test</span>
            </button>
          </div>
        </div>

        <div class="tts-model-right">
          <div class="tts-info-box">
            <div class="tts-info-title small">â„¹ï¸ <span data-i18n="tts.model_info">Informacje o silniku</span> â€” Piper</div>
            <div class="tts-kv small">
              <span class="kv-h" data-i18n="tts.info.languages">JÄ™zyki</span> <span>~50</span>
              <span class="kv-h" data-i18n="tts.info.quality">JakoÅ›Ä‡</span> <span data-i18n="tts.quality.good">Dobra (naturalny gÅ‚os)</span>
              <span class="kv-h" data-i18n="tts.info.speed">SzybkoÅ›Ä‡</span> <span data-i18n="tts.speed.very_fast">Bardzo szybki (0.1x RT na CPU)</span>
              <span class="kv-h" data-i18n="tts.info.model_size">Rozmiar</span> <span>15-60 MB / gÅ‚os</span>
              <span class="kv-h" data-i18n="tts.info.gpu">GPU</span> <span data-i18n="tts.gpu.minimal">Minimalny zysk (i tak szybki na CPU)</span>
              <span class="kv-h" data-i18n="tts.info.license">Licencja</span> <span>MIT</span>
              <span class="kv-h" data-i18n="tts.info.framework">Framework</span> <span>ONNX Runtime (VITS)</span>
            </div>
            <div class="small muted" style="margin-top:8px" data-i18n="tts.piper.recommendation">
              âœ… Rekomendowany dla wiÄ™kszoÅ›ci jÄ™zykÃ³w europejskich. Najlepszy stosunek jakoÅ›Ä‡/szybkoÅ›Ä‡.
            </div>
          </div>
        </div>
      </div>

      <div class="hr"></div>

      <!-- ================ MMS-TTS ================ -->
      <div class="label">ğŸŒ MMS-TTS (Meta)</div>
      <div class="small muted" data-i18n="tts.mms.desc">Meta Massively Multilingual Speech â€” ponad 1100 jÄ™zykÃ³w. Najszersze pokrycie jÄ™zykowe. Automatyczny fallback dla rzadkich jÄ™zykÃ³w.</div>

      <div class="hr"></div>

      <div class="tts-model-row">
        <div class="tts-model-left">
          <div class="label">MMS â€” <span data-i18n="tts.engine_status">Status silnika</span></div>
          <div class="small" id="tts_mms_status">â€”</div>

          <select id="tts_mms_voice" class="input" data-engine="mms">
            <option value="facebook/mms-tts-pol">ğŸ‡µğŸ‡± Polski (pol)</option>
            <option value="facebook/mms-tts-eng">ğŸ‡¬ğŸ‡§ English (eng)</option>
            <option value="facebook/mms-tts-rus">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹ (rus)</option>
            <option value="facebook/mms-tts-ukr">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° (ukr)</option>
            <option value="facebook/mms-tts-bel">ğŸ‡§ğŸ‡¾ Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ (bel)</option>
            <option value="facebook/mms-tts-deu">ğŸ‡©ğŸ‡ª Deutsch (deu)</option>
            <option value="facebook/mms-tts-fra">ğŸ‡«ğŸ‡· FranÃ§ais (fra)</option>
            <option value="facebook/mms-tts-spa">ğŸ‡ªğŸ‡¸ EspaÃ±ol (spa)</option>
            <option value="facebook/mms-tts-ita">ğŸ‡®ğŸ‡¹ Italiano (ita)</option>
            <option value="facebook/mms-tts-por">ğŸ‡§ğŸ‡· PortuguÃªs (por)</option>
            <option value="facebook/mms-tts-cmn">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (cmn)</option>
            <option value="facebook/mms-tts-jpn">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (jpn)</option>
            <option value="facebook/mms-tts-kor">ğŸ‡°ğŸ‡· í•œêµ­ì–´ (kor)</option>
            <option value="facebook/mms-tts-tur">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e (tur)</option>
            <option value="facebook/mms-tts-nld">ğŸ‡³ğŸ‡± Nederlands (nld)</option>
            <option value="facebook/mms-tts-ces">ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina (ces)</option>
            <option value="facebook/mms-tts-swe">ğŸ‡¸ğŸ‡ª Svenska (swe)</option>
            <option value="facebook/mms-tts-arb">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (arb)</option>
            <option value="facebook/mms-tts-hin">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€ (hin)</option>
          </select>

          <div class="tts-install-row">
            <button class="btn primary mini" type="button" id="tts_mms_install_btn" data-engine="mms">
              â¬‡ï¸ <span data-i18n="tts.btn.install_voice">Instaluj silnik + gÅ‚os</span>
            </button>
            <span class="small muted" id="tts_mms_inline">â€”</span>
          </div>

          <div class="tts-test-row">
            <input type="text" id="tts_mms_test_text" class="input" placeholder="Tekst testowy..." value="Hello, this is a TTS test.">
            <button class="btn secondary mini" type="button" id="tts_mms_test_btn" data-engine="mms">
              ğŸ”Š <span data-i18n="tts.btn.test">Test</span>
            </button>
          </div>
        </div>

        <div class="tts-model-right">
          <div class="tts-info-box">
            <div class="tts-info-title small">â„¹ï¸ <span data-i18n="tts.model_info">Informacje o silniku</span> â€” MMS-TTS</div>
            <div class="tts-kv small">
              <span class="kv-h" data-i18n="tts.info.languages">JÄ™zyki</span> <span>1100+</span>
              <span class="kv-h" data-i18n="tts.info.quality">JakoÅ›Ä‡</span> <span data-i18n="tts.quality.ok">OK (syntetyczny, zrozumiaÅ‚y)</span>
              <span class="kv-h" data-i18n="tts.info.speed">SzybkoÅ›Ä‡</span> <span data-i18n="tts.speed.fast">Szybki (0.3x RT na CPU)</span>
              <span class="kv-h" data-i18n="tts.info.model_size">Rozmiar</span> <span>~30 MB / jÄ™zyk</span>
              <span class="kv-h" data-i18n="tts.info.gpu">GPU</span> <span data-i18n="tts.gpu.moderate">Umiarkowany zysk (2-3x szybciej)</span>
              <span class="kv-h" data-i18n="tts.info.license">Licencja</span> <span>CC-BY-NC-4.0</span>
              <span class="kv-h" data-i18n="tts.info.framework">Framework</span> <span>HuggingFace Transformers (VITS)</span>
            </div>
            <div class="tts-warn" data-i18n="tts.mms.license_warn">
              âš ï¸ Licencja CC-BY-NC â€” tylko do uÅ¼ytku niekomercyjnego.
            </div>
          </div>
        </div>
      </div>

      <div class="hr"></div>

      <!-- ================ KOKORO ================ -->
      <div class="label">ğŸ¯ Kokoro TTS</div>
      <div class="small muted" data-i18n="tts.kokoro.desc">Bardzo szybki, najwyÅ¼sza jakoÅ›Ä‡ gÅ‚osu. Jeden model 82 MB obsÅ‚ugujÄ…cy 9 jÄ™zykÃ³w. Apache 2.0.</div>

      <div class="hr"></div>

      <div class="tts-model-row">
        <div class="tts-model-left">
          <div class="label">Kokoro â€” <span data-i18n="tts.engine_status">Status silnika</span></div>
          <div class="small" id="tts_kokoro_status">â€”</div>

          <select id="tts_kokoro_voice" class="input" data-engine="kokoro">
            <option value="af_heart">ğŸ‡¬ğŸ‡§ English â€” Heart (female)</option>
            <option value="am_adam">ğŸ‡¬ğŸ‡§ English â€” Adam (male)</option>
            <option value="bf_emma">ğŸ‡©ğŸ‡ª Deutsch â€” Emma (female)</option>
            <option value="ff_siwis">ğŸ‡«ğŸ‡· FranÃ§ais â€” Siwis (female)</option>
            <option value="ef_dora">ğŸ‡ªğŸ‡¸ EspaÃ±ol â€” Dora (female)</option>
            <option value="if_sara">ğŸ‡®ğŸ‡¹ Italiano â€” Sara (female)</option>
            <option value="jf_alpha">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª â€” Alpha (female)</option>
            <option value="kf_yuha">ğŸ‡°ğŸ‡· í•œêµ­ì–´ â€” Yuha (female)</option>
            <option value="zf_xiaobei">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ â€” Xiaobei (female)</option>
            <option value="hf_alpha">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€ â€” Alpha (female)</option>
          </select>

          <div class="tts-install-row">
            <button class="btn primary mini" type="button" id="tts_kokoro_install_btn" data-engine="kokoro">
              â¬‡ï¸ <span data-i18n="tts.btn.install">Instaluj silnik + model</span>
            </button>
            <span class="small muted" id="tts_kokoro_inline">â€”</span>
          </div>

          <div class="tts-test-row">
            <input type="text" id="tts_kokoro_test_text" class="input" placeholder="Test text..." value="Hello, this is a text-to-speech test.">
            <button class="btn secondary mini" type="button" id="tts_kokoro_test_btn" data-engine="kokoro">
              ğŸ”Š <span data-i18n="tts.btn.test">Test</span>
            </button>
          </div>
        </div>

        <div class="tts-model-right">
          <div class="tts-info-box">
            <div class="tts-info-title small">â„¹ï¸ <span data-i18n="tts.model_info">Informacje o silniku</span> â€” Kokoro</div>
            <div class="tts-kv small">
              <span class="kv-h" data-i18n="tts.info.languages">JÄ™zyki</span> <span>9 (EN, DE, FR, ES, IT, JA, KO, ZH, HI)</span>
              <span class="kv-h" data-i18n="tts.info.quality">JakoÅ›Ä‡</span> <span data-i18n="tts.quality.very_good">Bardzo dobra (naturalny, ekspresyjny)</span>
              <span class="kv-h" data-i18n="tts.info.speed">SzybkoÅ›Ä‡</span> <span data-i18n="tts.speed.very_fast">Bardzo szybki (0.15x RT na CPU)</span>
              <span class="kv-h" data-i18n="tts.info.model_size">Rozmiar</span> <span>82 MB (jeden model, wszystkie jÄ™zyki)</span>
              <span class="kv-h" data-i18n="tts.info.gpu">GPU</span> <span data-i18n="tts.gpu.moderate">Umiarkowany zysk</span>
              <span class="kv-h" data-i18n="tts.info.license">Licencja</span> <span>Apache 2.0</span>
              <span class="kv-h" data-i18n="tts.info.framework">Framework</span> <span>PyTorch (StyleTTS2)</span>
            </div>
            <div class="small muted" style="margin-top:8px" data-i18n="tts.kokoro.recommendation">
              âœ… Najlepsza jakoÅ›Ä‡ gÅ‚osu. Ograniczony zestaw jÄ™zykÃ³w (9), ale te obsÅ‚ugiwane brzmiÄ… bardzo naturalnie.
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/tts_settings.js?v={{ app_version }}"></script>
{% endblock %}
