<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="color-scheme" content="light">
  <title>{{ title }} — {{ app_name }}</title>
  <link rel="stylesheet" href="/static/app.css"/>
  <script src="/static/icons.js"></script>
</head>
<body>
<div class="container">
  <aside class="sidebar">
    <div class="brand" id="sidebar_brand">
      <button id="sidebar_toggle" class="sidebar-toggle" type="button" aria-label="Toggle sidebar" data-i18n-title="sidebar.collapse">
        <span class="sidebar-toggle-ico" aria-hidden="true">
          <!-- collapse (when expanded) -->
          <svg class="ico-collapse" viewBox="0 0 24 24">
            <rect x="3" y="4" width="7" height="16" rx="2" fill="url(#ig-blue-cyan)" fill-opacity=".15" stroke="url(#ig-blue-cyan)" stroke-width="1.3"/>
            <path d="M13 12h7" stroke="url(#ig-sky-purple)" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M16.5 8.5l-4 3.5 4 3.5" stroke="url(#ig-sky-purple)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
          </svg>
          <!-- expand (when collapsed) -->
          <svg class="ico-expand" viewBox="0 0 24 24">
            <rect x="3" y="4" width="7" height="16" rx="2" fill="url(#ig-blue-cyan)" fill-opacity=".15" stroke="url(#ig-blue-cyan)" stroke-width="1.3"/>
            <path d="M13 12h7" stroke="url(#ig-sky-purple)" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M16.5 8.5l4 3.5-4 3.5" stroke="url(#ig-sky-purple)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
          </svg>
        </span>
      </button>

      <div class="brand-top">
        <div class="logo logo-lg">
          <img src="/static/logo.png" alt="AISTATEweb logo"/>
        </div>
        <div class="brand-text">
          <div class="brand-name">{{ app_name }}</div>
          <div class="brand-ver">{{ app_version }}</div>
        </div>
      </div>

      <nav class="nav">
        <a href="/new-project" data-icon="projects" class="{{ 'active' if active=='new_project' else '' }}" data-i18n-title="nav.new_project">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <rect x="3" y="5" width="18" height="14" rx="3" stroke="currentColor" stroke-width="1.5" fill="none"/>
              <path class="brush" d="M3 9h18"/>
              <circle cx="6" cy="7" r=".8" fill="currentColor" opacity=".5"/>
              <circle cx="8.5" cy="7" r=".8" fill="currentColor" opacity=".4"/>
              <path d="M8 13l3-2.5 2.5 1.8L17 11" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
              <circle cx="17.5" cy="5" r="2.2" fill="currentColor" opacity=".8"/>
              <path d="M17.5 4.2v1.6M16.7 5h1.6" stroke="var(--card-bg,#fff)" stroke-width="1.1" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.new_project">Projekty</span>
        </a>
        <a href="/transcription" data-icon="transcription" class="{{ 'active' if active=='transcription' else '' }}" data-i18n-title="nav.transcription">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path class="brush" d="M2 12c1-3 2 3 3 0s2 3 3 0 2-3 3 0"/>
              <path d="M14 9v6M16 8v8M18 10v4" stroke-width="1.8" stroke-linecap="round"/>
              <path d="M13 12l1.5-.5" opacity=".3" stroke-dasharray="1 1.5"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.transcription">Transcription</span>
        </a>
        <a href="/diarization" data-icon="diarization" class="{{ 'active' if active=='diarization' else '' }}" data-i18n-title="nav.diarization">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="7" cy="8" r="2.8" stroke-width="1.4"/>
              <path d="M3 17c0-2.5 1.8-4 4-4s4 1.5 4 4" stroke-width="1.4" stroke-linecap="round"/>
              <circle cx="17" cy="8" r="2.8" stroke-width="1.4"/>
              <path d="M13 17c0-2.5 1.8-4 4-4s4 1.5 4 4" stroke-width="1.4" stroke-linecap="round"/>
              <path class="brush" d="M10 10.5c.6.4 1.2.4 2 .4s1.4 0 2-.4" stroke-dasharray="1.5 1"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.diarization">Diarization</span>
        </a>
        <a href="/analysis" data-icon="analysis" class="{{ 'active' if active=='analysis' else '' }}" data-i18n-title="nav.analysis">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3C8 3 5 5.5 5 9c0 2 .8 3.5 2 4.5L8 19h8l1-5.5c1.2-1 2-2.5 2-4.5 0-3.5-3-6-7-6z" stroke-linejoin="round"/>
              <path d="M9 19h6v1.5a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 20.5V19z" stroke-width="1.3"/>
              <path class="brush" d="M12 7v4M10 9h4" stroke-linecap="round" opacity=".6"/>
              <circle cx="8.5" cy="11" r=".8" fill="currentColor" opacity=".5"/>
              <circle cx="15.5" cy="11" r=".8" fill="currentColor" opacity=".5"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.analysis">Analiza</span>
        </a>
        <a href="/chat" data-icon="chat" class="{{ 'active' if active=='chat' else '' }}" data-i18n-title="nav.chat">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 6a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3h-3l-3.5 3.5L10 16H7a3 3 0 0 1-3-3V6z"/>
              <circle cx="9" cy="9.5" r="1.2" stroke-width="1.2"/>
              <circle cx="15" cy="9.5" r="1.2" stroke-width="1.2"/>
              <path class="brush" d="M9 9.5h6" stroke-dasharray="1.5 1" opacity=".5"/>
              <path d="M10.5 12c.5.4 1.2.6 1.5.6s1-.2 1.5-.6" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.chat">Chat LLM</span>
        </a>
        <a href="/translation" data-icon="translation" class="{{ 'active' if active=='translation' else '' }}" data-i18n-title="nav.translation">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <rect x="2" y="5" width="8" height="14" rx="2" stroke-width="1.3"/>
              <rect x="14" y="5" width="8" height="14" rx="2" stroke-width="1.3"/>
              <path class="brush" d="M5 9h3M5 11h2" stroke-linecap="round" opacity=".5"/>
              <path d="M17 9h3M17 11h2" stroke-linecap="round" opacity=".5"/>
              <path d="M10 10c.8-.3 1.5-.3 2-.3s1.2 0 2 .3" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M10 14c.8.3 1.5.3 2 .3s1.2 0 2-.3" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.translation">Tłumaczenie</span>
        </a>
        <a href="/info" data-icon="info" class="{{ 'active' if active=='info' else '' }}" data-i18n-title="nav.info">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 2l8 5v10l-8 5-8-5V7l8-5z" stroke-linejoin="round"/>
              <path class="brush" d="M12 2v20M4 7l8 5 8-5M4 17l8-5 8 5" opacity=".2"/>
              <circle cx="12" cy="9" r="1" fill="currentColor"/>
              <path d="M12 11.5v4" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.info">Info</span>
        </a>
        <a href="/settings" data-icon="settings" class="{{ 'active' if active=='settings' else '' }}" data-i18n-title="nav.settings">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="12" r="2.5" fill="currentColor" opacity=".6"/>
              <ellipse cx="12" cy="12" rx="9" ry="3.5" stroke-width="1.2"/>
              <ellipse cx="12" cy="12" rx="9" ry="3.5" stroke-width="1.2" transform="rotate(60 12 12)"/>
              <ellipse class="brush" cx="12" cy="12" rx="9" ry="3.5" stroke-width="1.2" transform="rotate(-60 12 12)"/>
              <circle cx="12" cy="12" r="1" fill="var(--card-bg,#fff)"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.settings">Settings</span>
        </a>
        <div class="nav-section" data-i18n="nav.admin_panel">Panel Administracyjny</div>
        <a href="/admin" data-icon="gpu" class="{{ 'active' if active=='admin' else '' }}" data-i18n-title="nav.admin">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <rect x="6" y="6" width="12" height="12" rx="2" stroke-width="1.5"/>
              <rect class="brush" x="9" y="9" width="6" height="6" rx="1" opacity=".25"/>
              <path d="M9 4v2M12 4v2M15 4v2M9 18v2M12 18v2M15 18v2M4 9h2M4 12h2M4 15h2M18 9h2M18 12h2M18 15h2" stroke-width="1.3" stroke-linecap="round"/>
              <path d="M10.5 12h3M12 10.5v3" stroke-width="1" stroke-linecap="round" opacity=".6"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.admin">Ustawienia GPU</span>
        </a>
        <a href="/llm-settings" data-icon="llm" class="{{ 'active' if active=='llm_settings' else '' }}" data-i18n-title="nav.llm_settings">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8 19v-2a4 4 0 0 1 8 0v2" stroke-width="1.4" stroke-linecap="round"/>
              <circle cx="12" cy="9" r="4.5" stroke-width="1.5"/>
              <path class="brush" d="M10 8c.3-.5.8-.8 1.2-.8.5 0 .8.2 1.2.5.4.3.8.5 1.2.5" stroke-linecap="round"/>
              <circle cx="10" cy="9.8" r=".5" fill="currentColor"/>
              <circle cx="14" cy="9.8" r=".5" fill="currentColor"/>
              <path d="M6 6l-1.5-1.5M18 6l1.5-1.5M5 12H3.5M20.5 12H19" stroke-width="1" stroke-linecap="round" opacity=".35"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.llm_settings">Ustawienia LLM</span>
        </a>
        <a href="/asr-settings" data-icon="asr" class="{{ 'active' if active=='asr_settings' else '' }}" data-i18n-title="nav.asr_settings">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path class="brush" d="M3 12c0-2 1-3 1-5M6 12c0-2.5 1-4 1-6.5M3 12c0 2 1 3 1 5M6 12c0 2.5 1 4 1 6.5" stroke-linecap="round"/>
              <rect x="10" y="5" width="11" height="14" rx="2.5" stroke-width="1.3"/>
              <circle cx="13" cy="9" r="1" fill="currentColor" opacity=".5"/>
              <circle cx="17" cy="9" r="1" fill="currentColor" opacity=".5"/>
              <circle cx="13" cy="13" r="1" fill="currentColor" opacity=".5"/>
              <circle cx="17" cy="13" r="1" fill="currentColor" opacity=".5"/>
              <path d="M13 9l4 4M17 9l-4 4" stroke-width=".8" opacity=".3"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.asr_settings">Ustawienia ASR</span>
        </a>
        <a href="/nllb-settings" data-icon="nllb" class="{{ 'active' if active=='nllb_settings' else '' }}" data-i18n-title="nav.nllb_settings">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 7h16M4 12h16M4 17h16" stroke-linecap="round" opacity=".25"/>
              <path class="brush" d="M5 7h4M9 12h6M15 17h4" stroke-width="2.5" stroke-linecap="round"/>
              <path d="M15 7l2-2M17 5l2 2" stroke-width="1.2" stroke-linecap="round"/>
              <circle cx="7" cy="17" r="1.5" stroke-width="1.2"/>
              <path d="M7 16v2M6 17h2" stroke-width=".8" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.nllb_settings">Ustawienia NLLB</span>
        </a>
        <a href="/logs" data-icon="logs" class="{{ 'active' if active=='logs' else '' }}" data-i18n-title="nav.logs">
          <span class="nav-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <rect x="3" y="4" width="18" height="16" rx="3" stroke-width="1.4"/>
              <path d="M3 8h18" stroke-width="1" opacity=".25"/>
              <circle cx="5.5" cy="6" r=".6" fill="currentColor" opacity=".5"/>
              <circle cx="7.5" cy="6" r=".6" fill="currentColor" opacity=".4"/>
              <circle cx="9.5" cy="6" r=".6" fill="currentColor" opacity=".3"/>
              <path class="brush" d="M7 12l2.5 2-2.5 2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 16h5" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </span>
          <span class="nav-label" data-i18n="nav.logs">Logi</span>
        </a>
      </nav>
    </div>
  </aside>

  <main class="main">
    <div class="topbar">
      <div class="topbar-left">
        <div class="small"><span data-i18n="top.current_project">Bieżący projekt</span>: <b id="current_project">(…)</b></div>
        <div class="small"><span data-i18n="top.source_file">Plik źródłowy projektu</span>: <b id="current_audio">(…)</b></div>
      </div>
    </div>

    {% block content %}{% endblock %}
  </main>
</div>

<script src="/static/app.js?v={{ app_version }}"></script>
<script>
  (async()=>{
    await initI18n();
    await refreshCurrentProjectInfo();
    applyI18n();
    initSidebar();
  })();
</script>
{% block scripts %}{% endblock %}
</body>
</html>
